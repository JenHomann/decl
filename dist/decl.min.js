!function t(e,n,i){function o(s,c){if(!n[s]){if(!e[s]){var a="function"==typeof require&&require;if(!c&&a)return a(s,!0);if(r)return r(s,!0);var u=new Error("Cannot find module '"+s+"'");throw u.code="MODULE_NOT_FOUND",u}var l=n[s]={exports:{}};e[s][0].call(l.exports,function(t){var n=e[s][1][t];return o(n?n:t)},l,l.exports,t,e,n,i)}return n[s].exports}for(var r="function"==typeof require&&require,s=0;s<i.length;s++)o(i[s]);return o}({1:[function(t,e,n){function i(t){D.push(t),S||(S=!0,M(r))}function o(t){return window.ShadowDOMPolyfill&&window.ShadowDOMPolyfill.wrapIfNeeded(t)||t}function r(){S=!1;var t=D;D=[],t.sort(function(t,e){return t.uid_-e.uid_});var e=!1;t.forEach(function(t){var n=t.takeRecords();s(t),n.length&&(t.callback_(n,t),e=!0)}),e&&r()}function s(t){t.nodes_.forEach(function(e){var n=g.get(e);n&&n.forEach(function(e){e.observer===t&&e.removeTransientObservers()})})}function c(t,e){for(var n=t;n;n=n.parentNode){var i=g.get(n);if(i)for(var o=0;o<i.length;o++){var r=i[o],s=r.options;if(n===t||s.subtree){var c=e(s);c&&r.enqueue(c)}}}}function a(t){this.callback_=t,this.nodes_=[],this.records_=[],this.uid_=++C}function u(t,e){this.type=t,this.target=e,this.addedNodes=[],this.removedNodes=[],this.previousSibling=null,this.nextSibling=null,this.attributeName=null,this.attributeNamespace=null,this.oldValue=null}function l(t){var e=new u(t.type,t.target);return e.addedNodes=t.addedNodes.slice(),e.removedNodes=t.removedNodes.slice(),e.previousSibling=t.previousSibling,e.nextSibling=t.nextSibling,e.attributeName=t.attributeName,e.attributeNamespace=t.attributeNamespace,e.oldValue=t.oldValue,e}function h(t,e){return A=new u(t,e)}function p(t){return T?T:(T=l(A),T.oldValue=t,T)}function d(){A=T=void 0}function f(t){return t===T||t===A}function v(t,e){return t===e?t:T&&f(t)?T:null}function m(t,e,n){this.observer=t,this.target=e,this.options=n,this.transientObservedNodes=[]}var _=window.MutationObserver||window.WebKitMutationObserver||window.MozMutationObserver,b=window.WeakMap;if(void 0===b){var y=Object.defineProperty,E=Date.now()%1e9;b=function(){this.name="__st"+(1e9*Math.random()>>>0)+E+++"__"},b.prototype={set:function(t,e){var n=t[this.name];return n&&n[0]===t?n[1]=e:y(t,this.name,{value:[t,e],writable:!0}),this},get:function(t){var e;return(e=t[this.name])&&e[0]===t?e[1]:void 0},delete:function(t){var e=t[this.name];if(!e)return!1;var n=e[0]===t;return e[0]=e[1]=void 0,n},has:function(t){var e=t[this.name];return!!e&&e[0]===t}}}var g=new b,M=window.msSetImmediate;if(!M){var O=[],w=String(Math.random());window.addEventListener("message",function(t){if(t.data===w){var e=O;O=[],e.forEach(function(t){t()})}}),M=function(t){O.push(t),window.postMessage(w,"*")}}var S=!1,D=[],C=0;a.prototype={observe:function(t,e){if(t=o(t),!e.childList&&!e.attributes&&!e.characterData||e.attributeOldValue&&!e.attributes||e.attributeFilter&&e.attributeFilter.length&&!e.attributes||e.characterDataOldValue&&!e.characterData)throw new SyntaxError;var n=g.get(t);n||g.set(t,n=[]);for(var i,r=0;r<n.length;r++)if(n[r].observer===this){i=n[r],i.removeListeners(),i.options=e;break}i||(i=new m(this,t,e),n.push(i),this.nodes_.push(t)),i.addListeners()},disconnect:function(){this.nodes_.forEach(function(t){for(var e=g.get(t),n=0;n<e.length;n++){var i=e[n];if(i.observer===this){i.removeListeners(),e.splice(n,1);break}}},this),this.records_=[]},takeRecords:function(){var t=this.records_;return this.records_=[],t}};var A,T;m.prototype={enqueue:function(t){var e=this.observer.records_,n=e.length;if(e.length>0){var o=e[n-1],r=v(o,t);if(r)return void(e[n-1]=r)}else i(this.observer);e[n]=t},addListeners:function(){this.addListeners_(this.target)},addListeners_:function(t){var e=this.options;e.attributes&&t.addEventListener("DOMAttrModified",this,!0),e.characterData&&t.addEventListener("DOMCharacterDataModified",this,!0),e.childList&&t.addEventListener("DOMNodeInserted",this,!0),(e.childList||e.subtree)&&t.addEventListener("DOMNodeRemoved",this,!0)},removeListeners:function(){this.removeListeners_(this.target)},removeListeners_:function(t){var e=this.options;e.attributes&&t.removeEventListener("DOMAttrModified",this,!0),e.characterData&&t.removeEventListener("DOMCharacterDataModified",this,!0),e.childList&&t.removeEventListener("DOMNodeInserted",this,!0),(e.childList||e.subtree)&&t.removeEventListener("DOMNodeRemoved",this,!0)},addTransientObserver:function(t){if(t!==this.target){this.addListeners_(t),this.transientObservedNodes.push(t);var e=g.get(t);e||g.set(t,e=[]),e.push(this)}},removeTransientObservers:function(){var t=this.transientObservedNodes;this.transientObservedNodes=[],t.forEach(function(t){this.removeListeners_(t);for(var e=g.get(t),n=0;n<e.length;n++)if(e[n]===this){e.splice(n,1);break}},this)},handleEvent:function(t){switch(t.stopImmediatePropagation(),t.type){case"DOMAttrModified":var e=t.attrName,n=t.relatedNode.namespaceURI,i=t.target,o=new h("attributes",i);o.attributeName=e,o.attributeNamespace=n;var r=t.attrChange===MutationEvent.ADDITION?null:t.prevValue;c(i,function(t){if(t.attributes&&(!t.attributeFilter||!t.attributeFilter.length||t.attributeFilter.indexOf(e)!==-1||t.attributeFilter.indexOf(n)!==-1))return t.attributeOldValue?p(r):o});break;case"DOMCharacterDataModified":var i=t.target,o=h("characterData",i),r=t.prevValue;c(i,function(t){if(t.characterData)return t.characterDataOldValue?p(r):o});break;case"DOMNodeRemoved":this.addTransientObserver(t.target);case"DOMNodeInserted":var s,a,i=t.relatedNode,u=t.target;"DOMNodeInserted"===t.type?(s=[u],a=[]):(s=[],a=[u]);var l=u.previousSibling,f=u.nextSibling,o=h("childList",i);o.addedNodes=s,o.removedNodes=a,o.previousSibling=l,o.nextSibling=f,c(i,function(t){if(t.childList)return o})}d()}},_||(_=a),e.exports=_},{}],2:[function(t,e,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var i=t("./scope");n.Scope=i.Scope,n.default=o;var o=function(){function t(t){this.scope=i.Scope.buildRootScope(t)}return t.select=function(t,e){return this.getDefaultInstance().select(t,e)},t.on=function(t,e){return this.getDefaultInstance().on(t,e)},t.getRootScope=function(){return this.getDefaultInstance().getRootScope()},t.inspect=function(){this.getDefaultInstance().inspect()},t.getDefaultInstance=function(){return this.defaultInstance||(this.defaultInstance=new t(document.documentElement))},t.setDefaultInstance=function(t){return this.defaultInstance=t},t.pristine=function(){this.defaultInstance&&(this.defaultInstance.pristine(),this.defaultInstance=null)},t.prototype.select=function(t,e){return this.scope.select(t,e)},t.prototype.on=function(t,e){return this.scope.on(t,e)},t.prototype.getRootScope=function(){return this.scope},t.prototype.inspect=function(){this.scope.inspect()},t.prototype.pristine=function(){this.scope.pristine()},t}();o.defaultInstance=null,n.Decl=o,"undefined"!=typeof window&&(window.Decl=o)},{"./scope":11}],3:[function(t,e,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var i=function(){function t(t){this.isActivated=!1,this.element=t}return t.prototype.activate=function(){this.isActivated||(this.isActivated=!0,this.subscription.connect())},t.prototype.deactivate=function(){this.isActivated&&(this.isActivated=!1,this.subscription.disconnect())},t}();n.Declaration=i},{}],4:[function(t,e,n){"use strict";var i=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])};return function(e,n){function i(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i)}}();Object.defineProperty(n,"__esModule",{value:!0});var o=t("./declaration"),r=t("../subscriptions/trivial_subscription"),s=function(t){function e(e,n){var i=t.call(this,e)||this;return i.executor=n,i.subscription=new r.TrivialSubscription(i.element,{connected:!0},i.executor),i}return i(e,t),e.prototype.inspect=function(){console.log("fires",this.executor,"when the element enters the DOM (matches)")},e}(o.Declaration);n.MatchDeclaration=s},{"../subscriptions/trivial_subscription":17,"./declaration":3}],5:[function(t,e,n){"use strict";var i=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])};return function(e,n){function i(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i)}}();Object.defineProperty(n,"__esModule",{value:!0});var o=t("./declaration"),r=t("../subscriptions/event_subscription"),s=function(t){function e(e,n,i){var o=t.call(this,e)||this;return o.matcher=n,o.executor=i,o.subscription=new r.EventSubscription(o.element,o.matcher,o.executor),o}return i(e,t),e.prototype.inspect=function(){console.log("fires",this.executor,"on",this.matcher)},e}(o.Declaration);n.OnDeclaration=s},{"../subscriptions/event_subscription":14,"./declaration":3}],6:[function(t,e,n){"use strict";var i=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])};return function(e,n){function i(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i)}}();Object.defineProperty(n,"__esModule",{value:!0});var o=t("./declaration"),r=t("../scope"),s=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.childScopes=[],e}return i(e,t),e.prototype.deactivate=function(){this.removeAllChildScopes(),t.prototype.deactivate.call(this)},e.prototype.getChildScopes=function(){return this.childScopes},e.prototype.addChildScope=function(t){this.isActivated&&(this.childScopes.push(t),t.activate())},e.prototype.removeChildScope=function(t){if(t.deactivate(),this.isActivated){var e=this.childScopes.indexOf(t);e>=0&&this.childScopes.splice(e,1)}},e.prototype.removeAllChildScopes=function(){for(var t;t=this.childScopes[0];)this.removeChildScope(t)},e.prototype.addChildScopeByElement=function(t,e){var n=new r.Scope(t,e);this.addChildScope(n)},e.prototype.removeChildScopeByElement=function(t){for(var e=0,n=this.childScopes;e<n.length;e++){var i=n[e];if(i.getElement()===t)return void this.removeChildScope(i)}},e}(o.Declaration);n.ScopeTrackingDeclaration=s},{"../scope":11,"./declaration":3}],7:[function(t,e,n){"use strict";var i=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])};return function(e,n){function i(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i)}}();Object.defineProperty(n,"__esModule",{value:!0});var o=t("./scope_tracking_declaration"),r=t("../subscriptions/matching_elements_subscription"),s=function(t){function e(e,n,i){var o=t.call(this,e)||this;return o.matcher=n,o.executor=i,o.subscription=new r.MatchingElementsSubscription(o.element,o.matcher,function(t){for(var e=0,n=t.addedElements;e<n.length;e++){var i=n[e];o.addChildScopeByElement(i,o.executor)}for(var r=0,s=t.removedElements;r<s.length;r++){var c=s[r];o.removeChildScopeByElement(c)}}),o}return i(e,t),e.prototype.inspect=function(){console.group(this.matcher,"("+this.childScopes.length+" matches)");try{for(var t=0,e=this.childScopes;t<e.length;t++){e[t].inspect()}}finally{console.groupEnd()}},e}(o.ScopeTrackingDeclaration);n.SelectDeclaration=s},{"../subscriptions/matching_elements_subscription":15,"./scope_tracking_declaration":6}],8:[function(t,e,n){"use strict";var i=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])};return function(e,n){function i(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i)}}();Object.defineProperty(n,"__esModule",{value:!0});var o=t("./declaration"),r=t("../subscriptions/trivial_subscription"),s=function(t){function e(e,n){var i=t.call(this,e)||this;return i.executor=n,i.subscription=new r.TrivialSubscription(i.element,{disconnected:!0},i.executor),i}return i(e,t),e.prototype.inspect=function(){console.log("fires",this.executor,"when the element leaves the DOM (unmatches)")},e}(o.Declaration);n.UnmatchDeclaration=s},{"../subscriptions/trivial_subscription":17,"./declaration":3}],9:[function(t,e,n){"use strict";var i=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])};return function(e,n){function i(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i)}}();Object.defineProperty(n,"__esModule",{value:!0});var o=t("./scope_tracking_declaration"),r=t("../subscriptions/element_matches_subscription"),s=function(t){function e(e,n,i){var o=t.call(this,e)||this;return o.matcher=n,o.executor=i,o.subscription=new r.ElementMatchesSubscription(o.element,o.matcher,function(t){t.isMatching?o.addChildScopeByElement(e,o.executor):o.removeChildScopeByElement(e)}),o}return i(e,t),e.prototype.inspect=function(){console.group("&",this.matcher,"("+this.childScopes.length+" matches)");try{for(var t=0,e=this.childScopes;t<e.length;t++){e[t].inspect()}}finally{console.groupEnd()}},e}(o.ScopeTrackingDeclaration);n.WhenDeclaration=s},{"../subscriptions/element_matches_subscription":13,"./scope_tracking_declaration":6}],10:[function(t,e,n){"use strict";function i(t){return"object"==typeof t&&"number"==typeof t.length}function o(t){if(i(t))return Array.prototype.slice.call(t,0);throw new TypeError("Expected ArrayLike")}function r(t,e){return Array.prototype.indexOf.call(t,e)!==-1}Object.defineProperty(n,"__esModule",{value:!0}),n.default=s;var s=function(){function t(){}return t.isMatchingElement=function(t,e){return this.getInstance().isMatchingElement(t,e)},t.collectMatchingElements=function(t,e){return this.getInstance().collectMatchingElements(t,e)},t.getInstance=function(){return this.instance||(this.instance=new t)},t.prototype.isMatchingElement=function(e,n){switch(typeof n){default:throw new TypeError(t.ELEMENT_MATCHER_TYPE_ERROR_MESSAGE);case"string":var i=n;return this.isMatchingElementFromCssSelector(e,i);case"object":var o=n;return this.isMatchingElementFromObject(e,o);case"function":var r=n;return this.isMatchingElementFromElementVistor(e,r)}},t.prototype.collectMatchingElements=function(e,n){switch(typeof n){default:throw new TypeError(t.ELEMENT_MATCHER_TYPE_ERROR_MESSAGE);case"string":var i=n;return this.collectMatchingElementsFromCssSelector(e,i);case"object":var o=n;return this.collectMatchingElementsFromObject(e,o);case"function":var r=n;return this.collectMatchingElementsFromElementVistor(e,r)}},t.prototype.isMatchingElementFromCssSelector=function(t,e){return"function"==typeof t.matches?t.matches(e):r(document.querySelectorAll(e),t)},t.prototype.isMatchingElementFromObject=function(e,n){if(null===n)return!1;if(i(n)){var o=n;if(0===o.length||o[0]instanceof Element)return r(o,e);throw new TypeError(t.ELEMENT_MATCHER_TYPE_ERROR_MESSAGE)}throw new TypeError(t.ELEMENT_MATCHER_TYPE_ERROR_MESSAGE)},t.prototype.isMatchingElementFromElementVistor=function(t,e){var n=e(t);if("boolean"==typeof n){return n}var i=n;return this.isMatchingElement(t,i)},t.prototype.collectMatchingElementsFromCssSelector=function(t,e){return o(t.querySelectorAll(e))},t.prototype.collectMatchingElementsFromObject=function(e,n){if(null===n)return[];if(i(n)){var r=n;if(0===r.length||r[0]instanceof Element)return o(r);throw new TypeError(t.ELEMENT_MATCHER_TYPE_ERROR_MESSAGE)}throw new TypeError(t.ELEMENT_MATCHER_TYPE_ERROR_MESSAGE)},t.prototype.collectMatchingElementsFromElementVistor=function(t,e){for(var n=[],i=t.children,o=0,r=i.length;o<r;o++){var s=i[o];if(s instanceof Element){var c=s,a=e(c);if("boolean"==typeof a){a&&n.push(c)}else n.push.apply(n,this.collectMatchingElements(c,a))}}return n},t}();s.ELEMENT_MATCHER_TYPE_ERROR_MESSAGE="Decl: An `ElementMatcher` must be a CSS selector (string) or a function which takes a node under consideration and returns a CSS selector (string) that matches all matching nodes in the subtree, an array-like object of matching nodes in the subtree, or a boolean value as to whether the node should be included (in this case, the function will be invoked again for all children of the node).",n.ElementCollector=s},{}],11:[function(t,e,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var i=t("./declarations/declaration");n.Declaration=i.Declaration;var o=t("./declarations/match_declaration"),r=t("./declarations/unmatch_declaration"),s=t("./declarations/on_declaration"),c=t("./declarations/select_declaration"),a=t("./declarations/when_declaration"),u=function(){function t(t,e){this.isActivated=!1,this.declarations=[],this.element=t,e&&e.call(this,this,this.element)}return t.buildRootScope=function(e){var n=new t(e);return n.activate(),n},t.prototype.getElement=function(){return this.element},t.prototype.getDeclarations=function(){return this.declarations},t.prototype.inspect=function(){this.isActivated?console.group(this.element,"(active)"):console.group(this.element,"(inactive)");try{for(var t=0,e=this.declarations;t<e.length;t++){e[t].inspect()}}finally{console.groupEnd()}},t.prototype.activate=function(){if(!this.isActivated){this.isActivated=!0;for(var t=0,e=this.declarations;t<e.length;t++){e[t].activate()}}},t.prototype.deactivate=function(){if(this.isActivated){this.isActivated=!1;for(var t=0,e=this.declarations;t<e.length;t++){e[t].deactivate()}}},t.prototype.pristine=function(){this.deactivate(),this.removeAllDeclarations()},t.prototype.match=function(t){return this.addDeclaration(new o.MatchDeclaration(this.element,t)),this},t.prototype.unmatch=function(t){return this.addDeclaration(new r.UnmatchDeclaration(this.element,t)),this},t.prototype.select=function(t,e){return this.addDeclaration(new c.SelectDeclaration(this.element,t,e)),this},t.prototype.when=function(t,e){return this.addDeclaration(new a.WhenDeclaration(this.element,t,e)),this},t.prototype.on=function(t,e,n){var i=arguments.length;switch(i){case 2:return this.onWithTwoArguments(t,e);case 3:return this.onWithThreeArguments(t,e,n);default:throw new TypeError("Failed to execute 'on' on 'Scope': 2 or 3 arguments required, but "+i+" present.")}},t.prototype.onWithTwoArguments=function(t,e){return this.addDeclaration(new s.OnDeclaration(this.element,t,e)),this},t.prototype.onWithThreeArguments=function(t,e,n){return this.select(e,function(e){e.on(t,n)}),this},t.prototype.addDeclaration=function(t){this.declarations.push(t),this.isActivated&&t.activate()},t.prototype.removeDeclaration=function(t){var e=this.declarations.indexOf(t);e>=0&&this.declarations.splice(e,1),t.deactivate()},t.prototype.removeAllDeclarations=function(){for(var t;t=this.declarations[0];)this.removeDeclaration(t)},t}();n.Scope=u},{"./declarations/declaration":3,"./declarations/match_declaration":4,"./declarations/on_declaration":5,"./declarations/select_declaration":7,"./declarations/unmatch_declaration":8,"./declarations/when_declaration":9}],12:[function(t,e,n){"use strict";var i=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])};return function(e,n){function i(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i)}}();Object.defineProperty(n,"__esModule",{value:!0});var o=t("./subscription");n.Subscription=o.Subscription,n.SubscriptionEvent=o.SubscriptionEvent;var r=t("mutation-observer"),s=function(t){function e(e,n){var i=t.call(this,e,n)||this;return i.isListening=!1,i.handleMutationTimeout=null,i.mutationCallback=function(){i.deferHandleMutations()},i.mutationObserver=new r(i.mutationCallback),i}return i(e,t),e.prototype.startListening=function(){this.isListening||(this.mutationObserver.observe(this.element,e.mutationObserverInit),this.isListening=!0)},e.prototype.stopListening=function(){this.isListening&&(this.mutationObserver.disconnect(),this.handleMutationsNow(),this.isListening=!1)},e.prototype.deferHandleMutations=function(){var t=this;null===this.handleMutationTimeout&&(this.handleMutationTimeout=setTimeout(function(){try{t.mutationObserver.takeRecords(),t.handleMutations()}finally{t.handleMutationTimeout=null}},0))},e.prototype.handleMutationsNow=function(){null!==this.handleMutationTimeout&&(clearTimeout(this.handleMutationTimeout),this.handleMutationTimeout=null,this.handleMutations())},e}(o.Subscription);s.mutationObserverInit={childList:!0,attributes:!0,characterData:!0,subtree:!0},n.BatchedMutationSubscription=s},{"./subscription":16,"mutation-observer":1}],13:[function(t,e,n){"use strict";var i=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])};return function(e,n){function i(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i)}}();Object.defineProperty(n,"__esModule",{value:!0});var o=t("./batched_mutation_subscription"),r=t("../element_collector"),s=function(t){function e(e,n,i){var o=t.call(this,e,i)||this;return o.isConnected=!1,o.isMatchingElement=!1,o.matcher=n,o}return i(e,t),e.prototype.connect=function(){this.isConnected||(this.updateIsMatchingElement(this.computeIsMatchingElement()),this.startListening(),this.isConnected=!0)},e.prototype.disconnect=function(){this.isConnected&&(this.stopListening(),this.updateIsMatchingElement(!1),this.isConnected=!1)},e.prototype.handleMutations=function(){this.updateIsMatchingElement(this.computeIsMatchingElement())},e.prototype.updateIsMatchingElement=function(t){var e=this.isMatchingElement;if(this.isMatchingElement=t,e!==t){var n=new c(this,t);this.executor(n,this.element)}},e.prototype.computeIsMatchingElement=function(){return r.ElementCollector.isMatchingElement(this.element,this.matcher)},e}(o.BatchedMutationSubscription);n.ElementMatchesSubscription=s;var c=function(t){function e(e,n){var i=t.call(this,e,"ElementMatchesChangedEvent")||this;return i.isMatching=n,i}return i(e,t),e}(o.SubscriptionEvent);n.ElementMatchesChangedEvent=c},{"../element_collector":10,"./batched_mutation_subscription":12}],14:[function(t,e,n){"use strict";var i=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])};return function(e,n){function i(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i)}}();Object.defineProperty(n,"__esModule",{value:!0});var o=t("./subscription"),r=function(t){function e(e,n,i){var o=t.call(this,e,i)||this;return o.isConnected=!1,o.eventMatcher=n,o.eventNames=o.parseEventMatcher(o.eventMatcher),o.eventListener=function(t){o.handleEvent(t)},o}return i(e,t),e.prototype.connect=function(){if(!this.isConnected){this.isConnected=!0;for(var t=0,e=this.eventNames;t<e.length;t++){var n=e[t];this.element.addEventListener(n,this.eventListener,!1)}}},e.prototype.disconnect=function(){if(this.isConnected){for(var t=0,e=this.eventNames;t<e.length;t++){var n=e[t];this.element.removeEventListener(n,this.eventListener,!1)}this.isConnected=!1}},e.prototype.handleEvent=function(t){this.executor(t,this.element)},e.prototype.parseEventMatcher=function(t){return t.split(" ")},e}(o.Subscription);n.EventSubscription=r},{"./subscription":16}],15:[function(t,e,n){"use strict";function i(t,e){for(var n=[],i=0,o=t;i<o.length;i++){var r=o[i];e.indexOf(r)===-1&&n.push(r)}return n}var o=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])};return function(e,n){function i(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i)}}();Object.defineProperty(n,"__esModule",{value:!0});var r=t("./batched_mutation_subscription"),s=t("../element_collector"),c=function(t){function e(e,n,i){var o=t.call(this,e,i)||this;return o.isConnected=!1,o.matchingElements=[],o.matcher=n,o}return o(e,t),e.prototype.connect=function(){this.isConnected||(this.updateMatchingElements(this.collectMatchingElements()),this.startListening(),this.isConnected=!0)},e.prototype.disconnect=function(){this.isConnected&&(this.stopListening(),this.updateMatchingElements([]),this.isConnected=!1)},e.prototype.handleMutations=function(){this.updateMatchingElements(this.collectMatchingElements())},e.prototype.updateMatchingElements=function(t){var e=this.matchingElements,n=i(t,e),o=i(e,t);if(this.matchingElements=t,n.length>0||o.length>0){var r=new a(this,n,o);this.executor(r,this.element)}},e.prototype.collectMatchingElements=function(){return s.ElementCollector.collectMatchingElements(this.element,this.matcher)},e}(r.BatchedMutationSubscription);n.MatchingElementsSubscription=c;var a=function(t){function e(e,n,i){var o=t.call(this,e,"MatchingElementsChanged")||this;return o.addedElements=n,o.removedElements=i,o}return o(e,t),e}(r.SubscriptionEvent);n.MatchingElementsChangedEvent=a},{"../element_collector":10,"./batched_mutation_subscription":12}],16:[function(t,e,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var i=function(){function t(t,e){this.element=t,this.executor=e}return t}();n.Subscription=i;var o=function(){function t(t,e){this.subscription=t,this.name=e}return t}();n.SubscriptionEvent=o},{}],17:[function(t,e,n){"use strict";var i=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])};return function(e,n){function i(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i)}}();Object.defineProperty(n,"__esModule",{value:!0});var o=t("./subscription"),r=function(t){function e(e,n,i){var o=t.call(this,e,"ElementConnected")||this;return o.element=n,o.isConnected=i,o}return i(e,t),e}(o.SubscriptionEvent);n.ElementConnectionChangedEvent=r;var s=function(t){function e(e,n,i){var o=t.call(this,e,i)||this;return o.isConnected=!1,o.config=n,o}return i(e,t),e.prototype.connect=function(){this.isConnected||(this.isConnected=!0,this.config.connected&&this.executor(this.buildElementConnectionChangedEvent(),this.element))},e.prototype.disconnect=function(){this.isConnected&&(this.isConnected=!1,this.config.disconnected&&this.executor(this.buildElementConnectionChangedEvent(),this.element))},e.prototype.buildElementConnectionChangedEvent=function(){return new r(this,this.element,this.isConnected)},e}(o.Subscription);n.TrivialSubscription=s},{"./subscription":16}]},{},[2]);
//# sourceMappingURL=decl.min.js.map
