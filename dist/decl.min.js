!function t(e,n,o){function i(c,s){if(!n[c]){if(!e[c]){var a="function"==typeof require&&require;if(!s&&a)return a(c,!0);if(r)return r(c,!0);var u=new Error("Cannot find module '"+c+"'");throw u.code="MODULE_NOT_FOUND",u}var p=n[c]={exports:{}};e[c][0].call(p.exports,function(t){var n=e[c][1][t];return i(n||t)},p,p.exports,t,e,n,o)}return n[c].exports}for(var r="function"==typeof require&&require,c=0;c<o.length;c++)i(o[c]);return i}({1:[function(t,e,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var o=t("./scope");n.Scope=o.Scope;var i=function(){function t(t){this.scope=o.Scope.buildRootScope(t)}return t.select=function(t,e){return this.getDefaultInstance().select(t,e)},t.on=function(t,e){return this.getDefaultInstance().on(t,e)},t.getRootScope=function(){return this.getDefaultInstance().getRootScope()},t.inspect=function(t){this.getDefaultInstance().inspect(t)},t.getDefaultInstance=function(){return this.defaultInstance||(this.defaultInstance=new t(window.document))},t.setDefaultInstance=function(t){return this.defaultInstance=t},t.pristine=function(){this.defaultInstance&&(this.defaultInstance.pristine(),this.defaultInstance=null)},t.activate=function(){return this.getDefaultInstance().activate()},t.deactivate=function(){return this.getDefaultInstance().deactivate()},t.prototype.select=function(t,e){return this.scope.select(t,e)},t.prototype.on=function(t,e){return this.scope.on(t,e)},t.prototype.getRootScope=function(){return this.scope},t.prototype.inspect=function(t){console.groupCollapsed("<<root>>");try{this.scope.inspect(t)}finally{console.groupEnd()}},t.prototype.pristine=function(){this.scope.pristine()},t.prototype.activate=function(){this.scope.activate()},t.prototype.deactivate=function(){this.scope.deactivate()},t.defaultInstance=null,t}();n.Decl=i,"undefined"!=typeof window&&(window.Decl=i),n.default=i},{"./scope":10}],2:[function(t,e,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var o=function(){function t(t){this.isActivated=!1,this.node=t}return t.prototype.activate=function(){this.isActivated||(this.isActivated=!0,this.subscription.connect())},t.prototype.deactivate=function(){this.isActivated&&(this.isActivated=!1,this.subscription.disconnect())},t}();n.Declaration=o},{}],3:[function(t,e,n){"use strict";var o=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])};return function(e,n){function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}();Object.defineProperty(n,"__esModule",{value:!0});var i=t("./declaration"),r=t("../subscriptions/trivial_subscription"),c=function(t){function e(e,n){var o=t.call(this,e)||this;return o.executor=n,o.subscription=new r.TrivialSubscription(o.node,{connected:!0},o.executor),o}return o(e,t),e.prototype.inspect=function(){console.groupCollapsed("matches"),console.log(this.executor),console.groupEnd()},e}(i.Declaration);n.MatchDeclaration=c},{"../subscriptions/trivial_subscription":16,"./declaration":2}],4:[function(t,e,n){"use strict";var o=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])};return function(e,n){function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}();Object.defineProperty(n,"__esModule",{value:!0});var i=t("./declaration"),r=t("../subscriptions/event_subscription"),c=function(t){function e(e,n,o){var i=t.call(this,e)||this;return i.matcher=n,i.executor=o,i.subscription=new r.EventSubscription(i.node,i.matcher,i.executor),i}return o(e,t),e.prototype.inspect=function(){console.groupCollapsed("on",this.matcher);try{console.log(this.executor)}finally{console.groupEnd()}},e}(i.Declaration);n.OnDeclaration=c},{"../subscriptions/event_subscription":12,"./declaration":2}],5:[function(t,e,n){"use strict";var o=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])};return function(e,n){function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}();Object.defineProperty(n,"__esModule",{value:!0});var i=t("./declaration"),r=t("../scope"),c=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.childScopes=[],e}return o(e,t),e.prototype.deactivate=function(){this.removeAllChildScopes(),t.prototype.deactivate.call(this)},e.prototype.getChildScopes=function(){return this.childScopes},e.prototype.inspectChildScopes=function(t){for(var e=0,n=this.childScopes;e<n.length;e++){n[e].inspect(t)}},e.prototype.addChildScope=function(t){this.isActivated&&(this.childScopes.push(t),t.activate())},e.prototype.removeChildScope=function(t){if(t.deactivate(),this.isActivated){var e=this.childScopes.indexOf(t);e>=0&&this.childScopes.splice(e,1)}},e.prototype.removeAllChildScopes=function(){for(var t;t=this.childScopes[0];)this.removeChildScope(t)},e.prototype.addChildScopeByNode=function(t,e){var n=new r.Scope(t,e);this.addChildScope(n)},e.prototype.removeChildScopeByNode=function(t){for(var e=0,n=this.childScopes;e<n.length;e++){var o=n[e];if(o.getNode()===t)return void this.removeChildScope(o)}},e}(i.Declaration);n.ScopeTrackingDeclaration=c},{"../scope":10,"./declaration":2}],6:[function(t,e,n){"use strict";var o=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])};return function(e,n){function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}();Object.defineProperty(n,"__esModule",{value:!0});var i=t("./scope_tracking_declaration"),r=t("../subscriptions/matching_nodes_subscription"),c=function(t){function e(e,n,o){var i=t.call(this,e)||this;return i.matcher=n,i.executor=o,i.subscription=new r.MatchingNodesSubscription(i.node,i.matcher,function(t){for(var e=0,n=t.addedNodes;e<n.length;e++){var o=n[e];i.addChildScopeByNode(o,i.executor)}for(var r=0,c=t.removedNodes;r<c.length;r++){var s=c[r];i.removeChildScopeByNode(s)}}),i}return o(e,t),e.prototype.inspect=function(t){console.groupCollapsed("select",this.matcher);try{this.inspectChildScopes(t)}finally{console.groupEnd()}},e}(i.ScopeTrackingDeclaration);n.SelectDeclaration=c},{"../subscriptions/matching_nodes_subscription":13,"./scope_tracking_declaration":5}],7:[function(t,e,n){"use strict";var o=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])};return function(e,n){function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}();Object.defineProperty(n,"__esModule",{value:!0});var i=t("./declaration"),r=t("../subscriptions/trivial_subscription"),c=function(t){function e(e,n){var o=t.call(this,e)||this;return o.executor=n,o.subscription=new r.TrivialSubscription(o.node,{disconnected:!0},o.executor),o}return o(e,t),e.prototype.inspect=function(){console.groupCollapsed("unmatches"),console.log(this.executor),console.groupEnd()},e}(i.Declaration);n.UnmatchDeclaration=c},{"../subscriptions/trivial_subscription":16,"./declaration":2}],8:[function(t,e,n){"use strict";var o=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])};return function(e,n){function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}();Object.defineProperty(n,"__esModule",{value:!0});var i=t("./scope_tracking_declaration"),r=t("../subscriptions/node_matches_subscription"),c=function(t){function e(e,n,o){var i=t.call(this,e)||this;return i.matcher=n,i.executor=o,i.subscription=new r.NodeMatchesSubscription(i.node,i.matcher,function(t){t.isMatching?i.addChildScopeByNode(i.node,i.executor):i.removeChildScopeByNode(i.node)}),i}return o(e,t),e.prototype.inspect=function(t){console.groupCollapsed("when",this.matcher);try{this.inspectChildScopes(t)}finally{console.groupEnd()}},e}(i.ScopeTrackingDeclaration);n.WhenDeclaration=c},{"../subscriptions/node_matches_subscription":14,"./scope_tracking_declaration":5}],9:[function(t,e,n){"use strict";function o(t){return"object"==typeof t&&"number"==typeof t.length}function i(t){if(o(t))return Array.prototype.slice.call(t,0);throw new TypeError("Expected ArrayLike")}function r(t,e){return-1!==Array.prototype.indexOf.call(t,e)}Object.defineProperty(n,"__esModule",{value:!0});var c=function(){function t(){}return t.isMatchingNode=function(t,e){return this.getInstance().isMatchingNode(t,e)},t.collectMatchingNodes=function(t,e){return this.getInstance().collectMatchingNodes(t,e)},t.getInstance=function(){return this.instance||(this.instance=new t)},t.prototype.isMatchingNode=function(e,n){switch(typeof n){default:throw new TypeError(t.NODE_MATCHER_TYPE_ERROR_MESSAGE);case"string":var o=n;return this.isMatchingNodeFromCssSelector(e,o);case"object":var i=n;return this.isMatchingNodeFromObject(e,i);case"function":var r=n;return this.isMatchingNodeFromNodeVistor(e,r)}},t.prototype.collectMatchingNodes=function(e,n){switch(typeof n){default:throw new TypeError(t.NODE_MATCHER_TYPE_ERROR_MESSAGE);case"string":var o=n;return this.collectMatchingNodesFromCssSelector(e,o);case"object":var i=n;return this.collectMatchingNodesFromObject(e,i);case"function":var r=n;return this.collectMatchingNodesFromNodeVistor(e,r)}},t.prototype.isMatchingNodeFromCssSelector=function(t,e){return t instanceof Element&&"function"==typeof t.matches?t.matches(e):r(t.ownerDocument.querySelectorAll(e),t)},t.prototype.isMatchingNodeFromObject=function(e,n){if(null===n)return!1;if(o(n)){var i=n;if(0===i.length||i[0]instanceof Node)return r(i,e);throw new TypeError(t.NODE_MATCHER_TYPE_ERROR_MESSAGE)}throw new TypeError(t.NODE_MATCHER_TYPE_ERROR_MESSAGE)},t.prototype.isMatchingNodeFromNodeVistor=function(t,e){var n=e(t);if("boolean"==typeof n){return n}var o=n;return this.isMatchingNode(t,o)},t.prototype.collectMatchingNodesFromCssSelector=function(t,e){return t instanceof Element||t instanceof Document||t instanceof DocumentFragment?i(t.querySelectorAll(e)):[]},t.prototype.collectMatchingNodesFromObject=function(e,n){if(null===n)return[];if(o(n)){var r=n;if(0===r.length||r[0]instanceof Node)return i(r);throw new TypeError(t.NODE_MATCHER_TYPE_ERROR_MESSAGE)}throw new TypeError(t.NODE_MATCHER_TYPE_ERROR_MESSAGE)},t.prototype.collectMatchingNodesFromNodeVistor=function(t,e){for(var n=[],o=t.childNodes,i=0,r=o.length;i<r;i++){var c=o[i];if(c instanceof Node){var s=c,a=e(s);if("boolean"==typeof a){a&&n.push(s)}else n.push.apply(n,this.collectMatchingNodes(s,a))}}return n},t.NODE_MATCHER_TYPE_ERROR_MESSAGE="Decl: A `NodeMatcher` must be a CSS selector (string) or a function which takes a node under consideration and returns a CSS selector (string) that matches all matching nodes in the subtree, an array-like object of matching nodes in the subtree, or a boolean value as to whether the node should be included (in this case, the function will be invoked again for all children of the node).",t}();n.NodeCollector=c,n.default=c},{}],10:[function(t,e,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var o=t("./declarations/declaration");n.Declaration=o.Declaration;var i=t("./declarations/match_declaration"),r=t("./declarations/unmatch_declaration"),c=t("./declarations/on_declaration"),s=t("./declarations/select_declaration"),a=t("./declarations/when_declaration"),u=function(){function t(t,e){this.executors=[],this.isActivated=!1,this.declarations=[],this.node=t,e&&this.addExecutor(e)}return t.buildRootScope=function(e){var n=new t(e);return n.activate(),n},t.prototype.addExecutor=function(t){return this.executors.push(t),t.call(this,this,this.node)},t.prototype.getNode=function(){return this.node},t.prototype.getDeclarations=function(){return this.declarations},t.prototype.inspect=function(t){console.groupCollapsed("<<",this.node,">>");try{if(t){console.groupCollapsed("source");for(var e=0,n=this.executors;e<n.length;e++){var o=n[e];console.log(o)}console.groupEnd()}for(var i=0,r=this.declarations;i<r.length;i++){r[i].inspect(t)}}finally{console.groupEnd()}},t.prototype.activate=function(){if(!this.isActivated){this.isActivated=!0;for(var t=0,e=this.declarations;t<e.length;t++){e[t].activate()}}},t.prototype.deactivate=function(){if(this.isActivated){this.isActivated=!1;for(var t=0,e=this.declarations;t<e.length;t++){e[t].deactivate()}}},t.prototype.pristine=function(){this.deactivate(),this.removeAllDeclarations()},t.prototype.match=function(t){return this.addDeclaration(new i.MatchDeclaration(this.node,t)),this},t.prototype.unmatch=function(t){return this.addDeclaration(new r.UnmatchDeclaration(this.node,t)),this},t.prototype.select=function(t,e){return this.addDeclaration(new s.SelectDeclaration(this.node,t,e)),this},t.prototype.when=function(t,e){return this.addDeclaration(new a.WhenDeclaration(this.node,t,e)),this},t.prototype.on=function(t,e,n){var o=arguments.length;switch(o){case 2:return this.onWithTwoArguments(t,e);case 3:return this.onWithThreeArguments(t,e,n);default:throw new TypeError("Failed to execute 'on' on 'Scope': 2 or 3 arguments required, but "+o+" present.")}},t.prototype.onWithTwoArguments=function(t,e){return this.addDeclaration(new c.OnDeclaration(this.node,t,e)),this},t.prototype.onWithThreeArguments=function(t,e,n){return this.select(e,function(e){e.on(t,n)}),this},t.prototype.addDeclaration=function(t){this.declarations.push(t),this.isActivated&&t.activate()},t.prototype.removeDeclaration=function(t){var e=this.declarations.indexOf(t);e>=0&&this.declarations.splice(e,1),t.deactivate()},t.prototype.removeAllDeclarations=function(){for(var t;t=this.declarations[0];)this.removeDeclaration(t)},t}();n.Scope=u},{"./declarations/declaration":2,"./declarations/match_declaration":3,"./declarations/on_declaration":4,"./declarations/select_declaration":6,"./declarations/unmatch_declaration":7,"./declarations/when_declaration":8}],11:[function(t,e,n){"use strict";var o=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])};return function(e,n){function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}();Object.defineProperty(n,"__esModule",{value:!0});var i=t("./subscription");n.Subscription=i.Subscription,n.SubscriptionEvent=i.SubscriptionEvent;var r=function(t){function e(e,n){var o=t.call(this,e,n)||this;return o.isListening=!1,o.mutationObserver=new MutationObserver(function(){o.handleMutations()}),o}return o(e,t),e.prototype.startListening=function(){this.isListening||(this.mutationObserver.observe(this.node,e.mutationObserverInit),this.isListening=!0)},e.prototype.stopListening=function(){this.isListening&&(this.mutationObserver.disconnect(),this.isListening=!1)},e.mutationObserverInit={childList:!0,attributes:!0,characterData:!0,subtree:!0},e}(i.Subscription);n.DocumentMutationSubscription=r},{"./subscription":15}],12:[function(t,e,n){"use strict";var o=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])};return function(e,n){function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}();Object.defineProperty(n,"__esModule",{value:!0});var i=t("./subscription"),r=function(t){function e(e,n,o){var i=t.call(this,e,o)||this;return i.isConnected=!1,i.eventMatcher=n,i.eventNames=i.parseEventMatcher(i.eventMatcher),i.eventListener=function(t){i.handleEvent(t)},i}return o(e,t),e.prototype.connect=function(){if(!this.isConnected){this.isConnected=!0;for(var t=0,e=this.eventNames;t<e.length;t++){var n=e[t];this.node.addEventListener(n,this.eventListener,!1)}}},e.prototype.disconnect=function(){if(this.isConnected){for(var t=0,e=this.eventNames;t<e.length;t++){var n=e[t];this.node.removeEventListener(n,this.eventListener,!1)}this.isConnected=!1}},e.prototype.handleEvent=function(t){this.executor(t,this.node)},e.prototype.parseEventMatcher=function(t){return t.split(" ")},e}(i.Subscription);n.EventSubscription=r},{"./subscription":15}],13:[function(t,e,n){"use strict";function o(t,e){for(var n=[],o=0,i=t;o<i.length;o++){var r=i[o];-1===e.indexOf(r)&&n.push(r)}return n}var i=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])};return function(e,n){function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}();Object.defineProperty(n,"__esModule",{value:!0});var r=t("./document_mutation_subscription"),c=t("../node_collector"),s=function(t){function e(e,n,o){var i=t.call(this,e,o)||this;return i.isConnected=!1,i.matchingNodes=[],i.matcher=n,i}return i(e,t),e.prototype.connect=function(){this.isConnected||(this.updateMatchingNode(this.collectMatchingNodes()),this.startListening(),this.isConnected=!0)},e.prototype.disconnect=function(){this.isConnected&&(this.stopListening(),this.updateMatchingNode([]),this.isConnected=!1)},e.prototype.handleMutations=function(){this.updateMatchingNode(this.collectMatchingNodes())},e.prototype.updateMatchingNode=function(t){var e=this.matchingNodes,n=o(t,e),i=o(e,t);if(this.matchingNodes=t,n.length>0||i.length>0){var r=new a(this,n,i);this.executor(r,this.node)}},e.prototype.collectMatchingNodes=function(){return c.NodeCollector.collectMatchingNodes(this.node,this.matcher)},e}(r.DocumentMutationSubscription);n.MatchingNodesSubscription=s;var a=function(t){function e(e,n,o){var i=t.call(this,e,"MatchingNodesChanged")||this;return i.addedNodes=n,i.removedNodes=o,i}return i(e,t),e}(r.SubscriptionEvent);n.MatchingNodesChangedEvent=a},{"../node_collector":9,"./document_mutation_subscription":11}],14:[function(t,e,n){"use strict";var o=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])};return function(e,n){function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}();Object.defineProperty(n,"__esModule",{value:!0});var i=t("./document_mutation_subscription"),r=t("../node_collector"),c=function(t){function e(e,n,o){var i=t.call(this,e,o)||this;return i.isConnected=!1,i.isMatchingNode=!1,i.matcher=n,i}return o(e,t),e.prototype.connect=function(){this.isConnected||(this.updateIsMatchingNode(this.computeIsMatchingNode()),this.startListening(),this.isConnected=!0)},e.prototype.disconnect=function(){this.isConnected&&(this.stopListening(),this.updateIsMatchingNode(!1),this.isConnected=!1)},e.prototype.handleMutations=function(){this.updateIsMatchingNode(this.computeIsMatchingNode())},e.prototype.updateIsMatchingNode=function(t){var e=this.isMatchingNode;if(this.isMatchingNode=t,e!==t){var n=new s(this,t);this.executor(n,this.node)}},e.prototype.computeIsMatchingNode=function(){return r.NodeCollector.isMatchingNode(this.node,this.matcher)},e}(i.DocumentMutationSubscription);n.NodeMatchesSubscription=c;var s=function(t){function e(e,n){var o=t.call(this,e,"NodeMatchesChangedEvent")||this;return o.isMatching=n,o}return o(e,t),e}(i.SubscriptionEvent);n.NodeMatchesChangedEvent=s},{"../node_collector":9,"./document_mutation_subscription":11}],15:[function(t,e,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var o=function(){function t(t,e){this.node=t,this.executor=e}return t}();n.Subscription=o;var i=function(){function t(t,e){this.subscription=t,this.name=e}return t}();n.SubscriptionEvent=i},{}],16:[function(t,e,n){"use strict";var o=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])};return function(e,n){function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}();Object.defineProperty(n,"__esModule",{value:!0});var i=t("./subscription"),r=function(t){function e(e,n,o){var i=t.call(this,e,"NodeConnected")||this;return i.node=n,i.isConnected=o,i}return o(e,t),e}(i.SubscriptionEvent);n.NodeConnectionChangedEvent=r;var c=function(t){function e(e,n,o){var i=t.call(this,e,o)||this;return i.isConnected=!1,i.config=n,i}return o(e,t),e.prototype.connect=function(){this.isConnected||(this.isConnected=!0,this.config.connected&&this.executor(this.buildNodeConnectionChangedEvent(),this.node))},e.prototype.disconnect=function(){this.isConnected&&(this.isConnected=!1,this.config.disconnected&&this.executor(this.buildNodeConnectionChangedEvent(),this.node))},e.prototype.buildNodeConnectionChangedEvent=function(){return new r(this,this.node,this.isConnected)},e}(i.Subscription);n.TrivialSubscription=c},{"./subscription":15}]},{},[1]);
//# sourceMappingURL=decl.min.js.map
