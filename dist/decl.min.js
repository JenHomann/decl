!function t(e,n,i){function o(r,c){if(!n[r]){if(!e[r]){var u="function"==typeof require&&require;if(!c&&u)return u(r,!0);if(s)return s(r,!0);var a=new Error("Cannot find module '"+r+"'");throw a.code="MODULE_NOT_FOUND",a}var h=n[r]={exports:{}};e[r][0].call(h.exports,function(t){var n=e[r][1][t];return o(n?n:t)},h,h.exports,t,e,n,i)}return n[r].exports}for(var s="function"==typeof require&&require,r=0;r<i.length;r++)o(i[r]);return o}({1:[function(t,e,n){"use strict";var i=t("./scope");n.Scope=i.Scope,Object.defineProperty(n,"__esModule",{value:!0}),n.default=o;var o=function(){function t(t){this.scope=i.Scope.buildRootScope(t)}return t.select=function(t,e){return this.getDefaultInstance().select(t,e)},t.on=function(t,e){return this.getDefaultInstance().on(t,e)},t.getDefaultInstance=function(){return this.defaultInstance||(this.defaultInstance=new t(document.documentElement))},t.setDefaultInstance=function(t){return this.defaultInstance=t},t.pristine=function(){this.defaultInstance&&(this.defaultInstance.pristine(),this.defaultInstance=null)},t.prototype.select=function(t,e){return this.getScope().select(t,e)},t.prototype.on=function(t,e){return this.getScope().on(t,e)},t.prototype.getScope=function(){return this.scope},t.prototype.pristine=function(){this.scope.pristine()},t}();n.Decl=o,"undefined"!=typeof window&&(window.Decl=o)},{"./scope":3}],2:[function(t,e,n){"use strict";function i(t){return"object"==typeof t&&"number"==typeof t.length}function o(t){if(i(t))return Array.prototype.slice.call(t,0);throw new TypeError("Expected ArrayLike")}function s(t,e){return Array.prototype.indexOf.call(t,e)!==-1}Object.defineProperty(n,"__esModule",{value:!0}),n.default=r;var r=function(){function t(){}return t.isMatchingElement=function(t,e){return this.getInstance().isMatchingElement(t,e)},t.collectMatchingElements=function(t,e){return this.getInstance().collectMatchingElements(t,e)},t.getInstance=function(){return this.instance||(this.instance=new t)},t.prototype.isMatchingElement=function(e,n){switch(typeof n){default:throw new TypeError(t.ELEMENT_MATCHER_TYPE_ERROR_MESSAGE);case"string":var i=n;return this.isMatchingElementFromCssSelector(e,i);case"object":var o=n;return this.isMatchingElementFromObject(e,o);case"function":var s=n;return this.isMatchingElementFromElementVistor(e,s)}},t.prototype.collectMatchingElements=function(e,n){switch(typeof n){default:throw new TypeError(t.ELEMENT_MATCHER_TYPE_ERROR_MESSAGE);case"string":var i=n;return this.collectMatchingElementsFromCssSelector(e,i);case"object":var o=n;return this.collectMatchingElementsFromObject(e,o);case"function":var s=n;return this.collectMatchingElementsFromElementVistor(e,s)}},t.prototype.isMatchingElementFromCssSelector=function(t,e){return"function"==typeof t.matches?t.matches(e):s(document.querySelectorAll(e),t)},t.prototype.isMatchingElementFromObject=function(e,n){if(null===n)return!1;if(i(n)){var o=n;if(0===o.length||o[0]instanceof Element)return s(o,e);throw new TypeError(t.ELEMENT_MATCHER_TYPE_ERROR_MESSAGE)}throw new TypeError(t.ELEMENT_MATCHER_TYPE_ERROR_MESSAGE)},t.prototype.isMatchingElementFromElementVistor=function(t,e){var n=e(t);if("boolean"==typeof n){var i=n;return i}var o=n;return this.isMatchingElement(t,o)},t.prototype.collectMatchingElementsFromCssSelector=function(t,e){return o(t.querySelectorAll(e))},t.prototype.collectMatchingElementsFromObject=function(e,n){if(null===n)return[];if(i(n)){var s=n;if(0===s.length||s[0]instanceof Element)return o(s);throw new TypeError(t.ELEMENT_MATCHER_TYPE_ERROR_MESSAGE)}throw new TypeError(t.ELEMENT_MATCHER_TYPE_ERROR_MESSAGE)},t.prototype.collectMatchingElementsFromElementVistor=function(t,e){for(var n=[],i=0,o=t.children;i<o.length;i++){var s=o[i];if(s instanceof Element){var r=s,c=e(r);if("boolean"==typeof c){var u=c;u&&n.push(r)}else n.push.apply(n,this.collectMatchingElements(r,c))}}return n},t}();r.ELEMENT_MATCHER_TYPE_ERROR_MESSAGE="Decl: An `ElementMatcher` must be a CSS selector (string) or a function which takes a node under consideration and returns a CSS selector (string) that matches all matching nodes in the subtree, an array-like object of matching nodes in the subtree, or a boolean value as to whether the node should be included (in this case, the function will be invoked again for all children of the node).",n.ElementCollector=r},{}],3:[function(t,e,n){"use strict";var i=t("./subscriptions/trivial_subscription"),o=t("./subscriptions/matching_elements_subscription"),s=t("./subscriptions/element_matches_subscription"),r=t("./subscriptions/event_subscription"),c=function(){function t(t,e){this.isActivated=!1,this.subscriptions=[],this.children=[],this.element=t,e&&e.call(this,this)}return t.buildRootScope=function(e){var n=new t(e);return n.activate(),n},t.prototype.getElement=function(){return this.element},t.prototype.match=function(t){return this.addSubscription(new i.TrivialSubscription(this.element,{connected:!0},t)),this},t.prototype.unmatch=function(t){return this.addSubscription(new i.TrivialSubscription(this.element,{disconnected:!0},t)),this},t.prototype.select=function(t,e){return this.addSubscription(new o.MatchingElementsSubscription(this.element,t,this.buildSelectExecutor(e))),this},t.prototype.when=function(t,e){return this.addSubscription(new s.ElementMatchesSubscription(this.element,t,this.buildWhenExecutor(e))),this},t.prototype.on=function(t,e){return this.addSubscription(new r.EventSubscription(this.element,t,e)),this},t.prototype.pristine=function(){for(var t=0,e=this.subscriptions;t<e.length;t++){var n=e[t];n.disconnect()}this.subscriptions.splice(0)},t.prototype.activate=function(){if(!this.isActivated){this.isActivated=!0;for(var t=0,e=this.subscriptions;t<e.length;t++){var n=e[t];n.connect()}}},t.prototype.deactivate=function(){if(this.isActivated){for(var t=0,e=this.subscriptions;t<e.length;t++){var n=e[t];n.disconnect()}this.isActivated=!1}},t.prototype.addSubscription=function(t){this.subscriptions.push(t),this.isActivated&&t.connect()},t.prototype.removeSubscription=function(t){var e=this.subscriptions.indexOf(t);e>=0&&(t.disconnect(),this.subscriptions.splice(e,1))},t.prototype.buildSelectExecutor=function(e){var n=[];return function(i,o){for(var s=0,r=o.addedElements;s<r.length;s++){var c=r[s],u=new t(c,e);n.push(u),u.activate()}for(var a=0,h=o.removedElements;a<h.length;a++)for(var l=h[a],p=0,f=n.length,u=void 0;p<f;p++)if(u=n[p],u.element===l){u.deactivate(),n.splice(p,1);break}}},t.prototype.buildWhenExecutor=function(e){var n=this,i=null;return function(o,s){s.isMatching?(i=new t(n.element,e),i.activate()):(i.deactivate(),i=null)}},t}();n.Scope=c},{"./subscriptions/element_matches_subscription":5,"./subscriptions/event_subscription":6,"./subscriptions/matching_elements_subscription":7,"./subscriptions/trivial_subscription":9}],4:[function(t,e,n){"use strict";var i=this&&this.__extends||function(t,e){function n(){this.constructor=t}for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i]);t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)},o=t("./subscription");n.Subscription=o.Subscription,n.SubscriptionEvent=o.SubscriptionEvent;var s=function(t){function e(e,n){var i=t.call(this,e,n)||this;return i.isListening=!1,i.handleMutationTimeout=null,i.mutationCallback=function(){i.deferHandleMutations()},i.mutationObserver=new MutationObserver(i.mutationCallback),i}return i(e,t),e.prototype.startListening=function(){this.isListening||(this.mutationObserver.observe(this.element,e.mutationObserverInit),this.isListening=!0)},e.prototype.stopListening=function(){this.isListening&&(this.mutationObserver.disconnect(),this.handleMutationsNow(),this.isListening=!1)},e.prototype.deferHandleMutations=function(){var t=this;null===this.handleMutationTimeout&&(this.handleMutationTimeout=setTimeout(function(){try{t.mutationObserver.takeRecords(),t.handleMutations()}finally{t.handleMutationTimeout=null}},0))},e.prototype.handleMutationsNow=function(){null!==this.handleMutationTimeout&&(clearTimeout(this.handleMutationTimeout),this.handleMutationTimeout=null,this.handleMutations())},e}(o.Subscription);s.mutationObserverInit={childList:!0,attributes:!0,characterData:!0,subtree:!0},n.BatchedMutationSubscription=s},{"./subscription":8}],5:[function(t,e,n){"use strict";var i=this&&this.__extends||function(t,e){function n(){this.constructor=t}for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i]);t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)},o=t("./batched_mutation_subscription"),s=t("../element_collector"),r=function(t){function e(e,n,i){var o=t.call(this,e,i)||this;return o.isConnected=!1,o.isMatchingElement=!1,o.matcher=n,o}return i(e,t),e.prototype.connect=function(){this.isConnected||(this.updateIsMatchingElement(this.computeIsMatchingElement()),this.startListening(),this.isConnected=!0)},e.prototype.disconnect=function(){this.isConnected&&(this.updateIsMatchingElement(!1),this.stopListening(),this.isConnected=!1)},e.prototype.handleMutations=function(){this.updateIsMatchingElement(this.computeIsMatchingElement())},e.prototype.updateIsMatchingElement=function(t){var e=this.isMatchingElement;if(this.isMatchingElement=t,e!==t){var n=new c(this,t);this.executor(this.element,n)}},e.prototype.computeIsMatchingElement=function(){return s.ElementCollector.isMatchingElement(this.element,this.matcher)},e}(o.BatchedMutationSubscription);n.ElementMatchesSubscription=r;var c=function(t){function e(e,n){var i=t.call(this,"ElementMatchesChangedEvent")||this;return i.elementMatchesSubscription=e,i.isMatching=n,i}return i(e,t),e}(o.SubscriptionEvent);n.ElementMatchesChangedEvent=c},{"../element_collector":2,"./batched_mutation_subscription":4}],6:[function(t,e,n){"use strict";var i=this&&this.__extends||function(t,e){function n(){this.constructor=t}for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i]);t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)},o=t("./subscription"),s=function(t){function e(e,n,i){var o=t.call(this,e,i)||this;return o.isConnected=!1,o.eventMatcher=n,o.eventNames=o.parseEventMatcher(o.eventMatcher),o.eventListener=function(t){o.handleEvent(t)},o}return i(e,t),e.prototype.connect=function(){if(!this.isConnected){this.isConnected=!0;for(var t=0,e=this.eventNames;t<e.length;t++){var n=e[t];this.element.addEventListener(n,this.eventListener,!1)}}},e.prototype.disconnect=function(){if(this.isConnected){for(var t=0,e=this.eventNames;t<e.length;t++){var n=e[t];this.element.removeEventListener(n,this.eventListener,!1)}this.isConnected=!1}},e.prototype.handleEvent=function(t){this.executor(this.element,t)},e.prototype.parseEventMatcher=function(t){return t.split(" ")},e}(o.Subscription);n.EventSubscription=s},{"./subscription":8}],7:[function(t,e,n){"use strict";function i(t,e){for(var n=[],i=0,o=t;i<o.length;i++){var s=o[i];e.indexOf(s)===-1&&n.push(s)}return n}var o=this&&this.__extends||function(t,e){function n(){this.constructor=t}for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i]);t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)},s=t("./batched_mutation_subscription"),r=t("../element_collector"),c=function(t){function e(e,n,i){var o=t.call(this,e,i)||this;return o.isConnected=!1,o.matchingElements=[],o.matcher=n,o}return o(e,t),e.prototype.connect=function(){this.isConnected||(this.updateMatchingElements(this.collectMatchingElements()),this.startListening(),this.isConnected=!0)},e.prototype.disconnect=function(){this.isConnected&&(this.updateMatchingElements([]),this.stopListening(),this.isConnected=!1)},e.prototype.handleMutations=function(){this.updateMatchingElements(this.collectMatchingElements())},e.prototype.updateMatchingElements=function(t){var e=this.matchingElements,n=i(t,e),o=i(e,t);if(this.matchingElements=t,n.length>0||o.length>0){var s=new u(this,n,o);this.executor(this.element,s)}},e.prototype.collectMatchingElements=function(){return r.ElementCollector.collectMatchingElements(this.element,this.matcher)},e}(s.BatchedMutationSubscription);n.MatchingElementsSubscription=c;var u=function(t){function e(e,n,i){var o=t.call(this,"MatchingElementsChanged")||this;return o.matchingElementsSubscription=e,o.addedElements=n,o.removedElements=i,o}return o(e,t),e}(s.SubscriptionEvent);n.MatchingElementsChangedEvent=u},{"../element_collector":2,"./batched_mutation_subscription":4}],8:[function(t,e,n){"use strict";var i=function(){function t(t,e){this.element=t,this.executor=e}return t}();n.Subscription=i;var o=function(){function t(t){this.name=t}return t}();n.SubscriptionEvent=o},{}],9:[function(t,e,n){"use strict";var i=this&&this.__extends||function(t,e){function n(){this.constructor=t}for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i]);t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)},o=t("./subscription"),s=function(t){function e(e,n,i){var o=t.call(this,e,i)||this;return o.isConnected=!1,o.config=n,o}return i(e,t),e.prototype.connect=function(){this.isConnected||(this.isConnected=!0,this.config.connected&&this.executor(this.element))},e.prototype.disconnect=function(){this.isConnected&&(this.isConnected=!1,this.config.disconnected&&this.executor(this.element))},e}(o.Subscription);n.TrivialSubscription=s},{"./subscription":8}]},{},[1]);
//# sourceMappingURL=decl.min.js.map
